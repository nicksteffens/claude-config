# Daily Logs - December 2025

## 2025-12-02

### Session Overview
**Duration:** 4 hours
**Main Objective:** Research and plan Percy replacement initiative with odiff and Ember Puppeteer screenshot addon
**Success Rating:** 10/10 - "Felt like real pair today"

### What We Accomplished ‚úÖ
- Researched odiff as Percy replacement for visual regression testing
  - Analyzed odiff capabilities for image comparison
  - Evaluated integration options with CI/CD pipelines
  - Confirmed technical feasibility as Percy alternative
- Created GitHub Project for Percy replacement initiative (https://github.com/users/nicksteffens/projects/1) with 15 items
  - Structured project into actionable tasks
  - Organized workstreams for different integration paths
  - Created clear milestones and dependencies
- Analyzed fluid repo to validate Ember Puppeteer screenshot addon approach
  - Identified 56 Percy calls in fluid codebase
  - Confirmed testem already has remote debugging port configured
  - Validated Puppeteer connection strategy is viable
- Created GitHub issue in fluid repo for Percy replacement (https://github.com/movableink/fluid/issues/184)
  - Documented technical approach and rationale
  - Outlined migration strategy for existing Percy tests
  - Established fluid as proving ground for both Storybook and Ember migrations
- Decided on addon name: `ember-puppeteer-screenshot`
  - Verified package name available on npm
  - Chose specific naming to reflect mechanism (Puppeteer-based)
  - Ensures clarity about implementation approach
- Set up public codemods repo (https://github.com/nicksteffens/codemods)
  - Added comprehensive README with directory structure documentation
  - Created blueprint templates for new codemods
  - Configured husky + commitlint for conventional commits enforcement
  - Organized existing codemods into framework directories (lodash/, mui/)
  - Planned future directories (percy/, ember/)

### Key Decisions Made
- **Addon naming:** `ember-puppeteer-screenshot` - specific to the mechanism used rather than generic
- **Codemods organization:** Framework-based directories (lodash/, mui/, percy/ planned, ember/ planned)
- **Proving ground strategy:** fluid repo will validate both Storybook (Storycap) and Ember (Puppeteer addon) migration paths
- **Documentation approach:** GitHub Pages not needed for codemods repo - README is sufficient for current needs

### Challenges Encountered üîß
None reported

### Most Valuable Collaboration
Keeping context and double-checking references CC was using throughout the session - created feeling of genuine pair programming rather than assistant/user dynamic

### Key Insight
Maintaining conversation context and actively verifying references/sources creates significantly better collaboration experience and more accurate outcomes

### Follow-Up Items üìù
1. Create odiff GitHub Action (core infrastructure piece)
2. Create ember-puppeteer-screenshot addon
3. Create Percy migration codemods

### Role Distribution
**Human:** Provided strategic direction, validated technical approaches, gave real-time feedback on context and reference accuracy, confirmed naming decisions, assessed session quality
**Claude:** Researched odiff technical capabilities, created GitHub Project structure, analyzed fluid repo codebase, set up codemods repository infrastructure, configured tooling (husky/commitlint), organized existing codemods, created documentation

### Success Factors
The session achieved a perfect 10/10 rating due to:
- Consistent context awareness throughout 4-hour session
- Active verification of references and sources rather than assumptions
- Collaborative decision-making on technical naming and organization
- Productive research and planning across multiple repositories
- Genuine pair programming dynamic where both parties contributed meaningfully
- Clear documentation of decisions and rationale for future reference

---

### Session Overview
**Duration:** 1 hour
**Main Objective:** Migrate gist codemods, create npm-conventional-commits template, modernize action-append-deployed-revision-link, and plan Storybook PR Preview Action extraction
**Success Rating:** 9/10

### What We Accomplished ‚úÖ
- **Gist Migration**
  - Searched user's GitHub gists for codemods
  - Found and migrated `mountWithRouter ‚Üí mountWithMixpanel` codemod to codemods repo (cypress/mount-with-router-to-mixpanel.js)
  - Deleted the migrated gist
- **Codemods Repo Cleanup**
  - Removed yarn.lock, standardized on npm (package-lock.json)
  - Confirmed .babelrc is needed for jscodeshift to parse TypeScript/React
- **npm-conventional-commits Template Repo**
  - Created new template repo: https://github.com/nicksteffens/npm-conventional-commits
  - Set up husky + commitlint for conventional commits
  - Marked as GitHub template for reuse
  - Added usage instructions to README
- **action-append-deployed-revision-link Modernization**
  - Created issues #15-18 for critical updates
  - Created PR #19 with all fixes:
    - Node runtime: node16 ‚Üí node20
    - actions/checkout: v3 ‚Üí v4
    - @actions/github: v5 ‚Üí v6
    - @actions/core: v1.10 ‚Üí v1.11
    - codeql-action: v2 ‚Üí v3
  - Fixed security vulnerabilities, all tests passing
  - Created issue #20 for migrating to comment-based try-links
- **Storybook PR Preview Action Project**
  - Analyzed ui repo's storybook-pr-preview.yml workflow
  - Created GitHub Project #2: "Storybook PR Preview Action" (https://github.com/users/nicksteffens/projects/2)
  - Added 13 draft items for extraction work
  - Documented full analysis: extractable components (deploy, comment, cleanup), inputs, dependencies, improvements

### Challenges Encountered üîß
A bit of hand-holding needed when using gh CLI commands - some confusion around command syntax and options

### Most Valuable Collaboration
Systematic approach to modernizing the GitHub Action with comprehensive issue tracking and testing

### Key Insight
GitHub project creation works without needing a repository - projects can exist at the user/organization level independently

### Follow-Up Items üìù
1. Complete review and merge PR #19 for action-append-deployed-revision-link
2. Begin extraction work on Storybook PR Preview Action using project plan
3. Consider migrating action-append-deployed-revision-link to comment-based try-links (issue #20)

### Role Distribution
**Human:** Provided assessment criteria, confirmed approach decisions, validated gh CLI usage patterns, directed work priorities
**Claude:** Migrated gist codemods, created template repository with conventional commits setup, modernized GitHub Action dependencies, analyzed workflow for extraction, created GitHub Project with detailed task breakdown

### Success Factors
The session achieved a 9/10 rating due to:
- Successful completion of multiple distinct objectives across different repositories
- Creation of reusable template repository for future npm projects
- Comprehensive modernization of GitHub Action with proper issue tracking
- Thorough analysis and planning for Storybook PR Preview Action extraction
- Good organization and documentation throughout

---

## 2025-12-04

### Session Overview
**Duration:** 30 minutes
**Main Objective:** Refactor NewUserHomepage SummaryCards to be self-contained and wire up user experience based on tactics threshold
**Success Rating:** 10/10

### What We Accomplished ‚úÖ
- **Refactored SummaryCards component**
  - Created new `SummaryCards.tsx` that encapsulates all 4 data hooks (useDeployments, useTactics, useCampaigns, useDataSourceConnections)
  - Moved PAGE_SIZE_CONFIG and data fetching from NewUserHomepage into the component
  - Kept SummaryCard exported for testing purposes
  - Deleted old SummaryCard.tsx file
  - Updated index.ts exports

- **Updated NewUserHomepage**
  - Removed the 4 hook calls and PAGE_SIZE_CONFIG from the page
  - Changed `showExistingUserExperience` from useState toggle to derived from `tactics.length > 0`
  - Removed manual toggle Alert/Button UI
  - Cleaned up unused imports (Alert, AlertTitle, Button)

- **Updated tests**
  - Updated SummaryCards.cy.tsx to create stub data using mirage.server.createList()
  - Added count assertions to verify API data displays correctly
  - Renamed test file from SummaryCard.cy.tsx to SummaryCards.cy.tsx
  - Updated homepage.cy.tsx e2e test to remove toggle button click (now automatic)

- **Created commits and PR**
  - Commit: `refactor(homepage): move summary cards data fetching into component`
  - Commit: `feat(homepage): show existing user experience based on tactics count`
  - Created draft PR #10186: https://github.com/movableink/front-end/pull/10186

### Challenges Encountered üîß
- Initial discussion about provider vs props pattern - decided simpler co-located hooks approach was better than full Context provider

### Most Valuable Collaboration
Claude was proactive about recognizing from the code context that more work would follow the initial task, keeping momentum and anticipating next steps

### Key Insight
Simple context awareness and being proactive about next steps creates efficient, focused sessions - no need for complex abstractions when simpler solutions work

### Follow-Up Items üìù
- [ ] Continue wiring up NewUserHomepage features
- [ ] Complete PR review and merge

### Role Distribution
**Human:** Directed refactoring approach, provided quick decisions on implementation details, validated test updates
**Claude:** Implemented refactor, updated tests, created commits and PR, maintained context throughout rapid iteration

### Success Factors
- Quick 30-minute session with focused scope
- Proactive context awareness - recognized patterns and anticipated follow-up work
- Minimal back-and-forth needed due to clear direction
- Clean commits with conventional format
- Tests updated alongside implementation

---

### Session Overview
**Duration:** 1.5 hours
**Main Objective:** Implement exportable ESLint rules for @movable/ui so consuming repos can import shared lint rules
**Success Rating:** 10/10

### What We Accomplished ‚úÖ
- **Research & Planning**
  - Found existing issue #447 for ESLint plugin feature
  - Added detailed implementation plan with auto-detection approach
  - Researched ESLint plugin structure by examining eslint-plugin-react-hooks locally
  - Decided on exclusions-based config (list what NOT to lint vs what to lint)

- **ESLint Plugin Implementation**
  - Created `eslint-plugin/` directory structure
  - Built custom rule `no-deprecated-grid` that detects deprecated Grid v1 imports
  - Created recommended config enabling the rule
  - Set up TypeScript build with separate tsconfig
  - Added `@types/eslint` dev dependency

- **Package Integration**
  - Added exports for `@movable/ui/eslint-plugin` in package.json
  - Created `build:eslint-plugin` script using tsc
  - Automated symlink creation in `prepare` script (CI-safe - only runs if lib exists)
  - Updated local .eslintrc.json to dogfood our own plugin

- **Documentation**
  - Added ESLint Plugin section to main README.md
  - Created detailed `eslint-plugin/README.md` with setup instructions
  - Added Storybook documentation page (`stories/ESLintPlugin.mdx`)
  - Added PR testing instructions comment

- **PR Created**
  - Draft PR #491: https://github.com/movableink/ui/pull/491
  - Includes testing instructions for alpha release workflow

### Challenges Encountered üîß
- Had to convert from `no-restricted-imports` config to a proper custom ESLint rule for better plugin structure
- Needed symlink for local plugin resolution - made it CI-safe with directory existence check
- TypeScript types for ESLint configs required careful handling between legacy and flat config formats

### Most Valuable Collaboration
Getting Claude Code to research before implementing - examining existing eslint plugins locally and understanding patterns before writing code

### Key Insight
Inverting the config logic (exclusions-based rather than inclusions-based) reduces maintenance - new Ink components following naming convention are automatically enforced without config updates

### Follow-Up Items üìù
- [ ] Test with alpha release in a consuming app
- [ ] Implement `prefer-ink-components` rule with auto-detection
- [ ] Add more rules as patterns emerge

### Role Distribution
**Human:** Directed architecture decisions, reviewed approaches, provided feedback on implementation patterns, validated documentation
**Claude:** Researched ESLint plugin patterns, implemented custom rule, created build infrastructure, wrote comprehensive documentation, created PR with testing instructions

### Success Factors
- Research-first approach prevented rework
- Dogfooding immediately (using our own plugin in the repo)
- Comprehensive documentation across README, Storybook, and PR
- CI-safe automation for local development
- Clean separation between plugin code and main library

---

### Session Overview
**Duration:** 1 hour
**Main Objective:** Create MCP (Model Context Protocol) server for @movable/ui component library
**Success Rating:** 10/10

### What We Accomplished ‚úÖ
- **Created GitHub Issue #492** with detailed implementation plan for MCP server
  - Defined architecture, tools, resources, and phased implementation approach
  - Documented local server setup and configuration

- **Implemented Complete MCP Server** with 7 tools:
  - `list_components` - Lists all 38 exported components
  - `get_component` - Gets detailed info for a specific component (props, JSDoc)
  - `get_theme` - Gets theme configuration (palette, typography, component overrides)
  - `get_design_tokens` - Gets design tokens by category (blue, green, neutral, etc.)
  - `get_component_example` - Gets code examples from Storybook stories
  - `search_components` - Searches components by keyword or category
  - `get_eslint_rules` - Gets available ESLint rules from @movable/ui/eslint-plugin

- **Set up mcp-server package**
  - TypeScript configuration with MCP SDK
  - Package.json with dependencies (@modelcontextprotocol/sdk, zod, ts-morph, glob)
  - Build and dev scripts

- **Created comprehensive documentation**
  - mcp-server/README.md with installation, configuration, and usage
  - Storybook MDX page for MCP Server
  - Updated main README with link to MCP docs
  - Added note about requiring local clone (no npx support yet)

- **Created Draft PR #493**
  - All tools implemented and tested
  - Documentation complete
  - Successfully integrated with Claude Code

- **Tested Integration**
  - Configured Claude Code with `claude mcp add` command
  - Verified all 7 tools work correctly
  - Demonstrated `list_components` and `get_theme` tools working

### Challenges Encountered üîß
- GitHub API connectivity issues when trying to update PR description via CLI
- MDX table formatting didn't render correctly in Storybook - switched to list format
- Node version compatibility warning with vite (unrelated to MCP work)

### Most Valuable Collaboration
Ability to quickly create a local MCP server - went from concept to working integration in about an hour

### Key Insight
Same as above - the speed of creating a functional MCP server that integrates with Claude Code enables rapid tooling development

### Follow-Up Items üìù
- [ ] Announce MCP server to the team
- [ ] Consider implementing ts-morph for more accurate prop parsing
- [ ] Future: bundle metadata for npx support without cloning

### Role Distribution
**Human:** Directed implementation, reviewed progress, provided quick decisions on approach, tested integration
**Claude:** Implemented all 7 MCP tools, created documentation, set up package infrastructure, tested JSON-RPC communication, created issue and PR

### Success Factors
- Clear phased approach from the issue plan
- Incremental commits after each tool implementation
- Immediate testing after each addition
- Research-first approach (checked MCP SDK docs before implementing)
- Real integration testing with Claude Code

---
